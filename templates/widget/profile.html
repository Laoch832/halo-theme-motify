<div xmlns:th="https://www.thymeleaf.org"
     th:fragment="widget (sidebar)"
     th:class="'card widget profile ' + ${sidebar.hide}">
  <div class="card-content">
    <nav class="level">
      <div class="level-item" style="flex-direction: column;">
        <figure class="image">
          <img class="avatar" height="100%" width="100%" th:src="${contributor.avatar}" th:alt="${contributor.displayName}">
        </figure>
        <p class="nickname" th:text="${contributor.displayName}"></p>
        <p class="motto spark-input" th:text="${contributor.bio}"></p>
        <p th:if="${!#strings.isEmpty(theme.config.sidebar.profile_location)}" class="address">
          <i class="ri-map-pin-line"></i>
          <span th:text="${theme.config.sidebar.profile_location}"></span>
        </p>
      </div>
    </nav>
    <nav class="level" th:if="${!#lists.isEmpty(theme.config.sidebar.custom_stats)}"
         th:with="unitWStr = #{widget.profile.stats.unit.w},
                  unitBwStr = #{widget.profile.stats.unit.bw},
                  unitW = 10000,
                  unitBw = 1000000">
      <div th:each="item,sindex :${theme.config.sidebar.custom_stats}" class="level-item" th:switch="${item}">
        <div th:case="visit" th:with="visit = ${stats.visit}">
          <p class="heading" th:text="${#messages.msg('widget.profile.stats.visit', visit / unitBw > 0 ? unitBwStr : (visit / unitW > 0 ? unitWStr : ''))}"></p>
          <p class="value" th:title="${visit / unitW > 0} ? ${visit}" th:text="${visit / unitBw > 0} ? (${#numbers.formatDecimal(visit / (unitBw * 1.0),1,1)}) : (${visit / unitW > 0} ? (${#numbers.formatDecimal(visit / (unitW * 1.0),1,1)}) : ${visit})"></p>
        </div>
        <div th:case="upvote" th:with="upvote = ${stats.upvote}">
          <p class="heading" th:text="${#messages.msg('widget.profile.stats.upvote', upvote / unitBw > 0 ? unitBwStr : (upvote / unitW > 0 ? unitWStr : ''))}"></p>
          <p class="value" th:title="${upvote / unitW > 0} ? ${upvote}" th:text="${upvote / unitBw > 0} ? (${#numbers.formatDecimal(upvote / (unitBw * 1.0),1,1)}) : (${upvote / unitW > 0} ? (${#numbers.formatDecimal(upvote / (unitW * 1.0),1,1)}) : ${upvote})"></p>
        </div>
        <div th:case="comment" th:with="comment = ${stats.comment}">
          <p class="heading" th:text="${#messages.msg('widget.profile.stats.comment', comment / unitBw > 0 ? unitBwStr : (comment / unitW > 0 ? unitWStr : ''))}"></p>
          <p class="value" th:title="${comment / unitW > 0} ? ${comment}" th:text="${comment / unitBw > 0} ? (${#numbers.formatDecimal(comment / (unitBw * 1.0),1,1)}) : (${comment / unitW > 0} ? (${#numbers.formatDecimal(comment / (unitW * 1.0),1,1)}) : ${comment})"></p>
        </div>
        <div th:case="category" th:with="category = ${stats.category}">
          <p class="heading" th:text="${#messages.msg('widget.profile.stats.category', category / unitBw > 0 ? unitBwStr : (category / unitW > 0 ? unitWStr : ''))}"></p>
          <p class="value" th:title="${category / unitW > 0} ? ${category}" th:text="${category / unitBw > 0} ? (${#numbers.formatDecimal(category / (unitBw * 1.0),1,1)}) : (${category / unitW > 0} ? (${#numbers.formatDecimal(category / (unitW * 1.0),1,1)}) : ${category})"></p>
        </div>
        <div th:case="tag" th:with="tagsList = ${tagFinder.listAll()}, tags = ${#lists.size(tagsList)}">
          <p class="heading" th:text="${#messages.msg('widget.profile.stats.tag', tags / unitBw > 0 ? unitBwStr : (tags / unitW > 0 ? unitWStr : ''))}"></p>
          <p class="value" th:title="${tags / unitW > 0} ? ${tags}" th:text="${tags / unitBw > 0} ? (${#numbers.formatDecimal(tags / (unitBw * 1.0),1,1)}) : (${tags / unitW > 0} ? (${#numbers.formatDecimal(tags / (unitW * 1.0),1,1)}) : ${tags})"></p>
        </div>
        <div th:case="*" th:with="post = ${stats.post}">
          <p class="heading" th:text="${#messages.msg('widget.profile.stats.post', post / unitBw > 0 ? unitBwStr : (post / unitW > 0 ? unitWStr : ''))}"></p>
          <p class="value" th:title="${post / unitW > 0} ? ${post}" th:text="${post / 10000000 > 0} ? (${#numbers.formatDecimal(post / (unitBw * 1.0),1,1)}) : (${post / unitW > 0} ? (${#numbers.formatDecimal(post / (unitW * 1.0),1,1)}) : ${post})"></p>
        </div>
      </div>
    </nav>
    <div th:if="${!#strings.isEmpty(theme.config.sidebar.profile_theme_button)}" class="level"
         th:with="content = ${#strings.arraySplit(theme.config.sidebar.profile_theme_button,'|')}">
      <a class="level-item button is-link is-rounded" th:aria-label="${content[0]}" th:title="${content[0]}"
         th:href="${content.length>=2?content[1]:''}" target="_blank" rel="nofollow noopener noreferrer"
         th:text="${content[0]}"></a>
    </div>
    <div th:if="${!#lists.isEmpty(theme.config.sidebar.custom_options)}" class="level">
      <a th:each="option :${theme.config.sidebar.custom_options}"
         class="level-item button is-transparent"
         target="_blank"
         th:aria-label="${option.name}"
         th:title="${option.name}"
         th:href="${option.url}"
         rel="nofollow noopener noreferrer">
        <i th:class="${option.icon}"></i>
      </a>
    </div>
  </div>
</div>
